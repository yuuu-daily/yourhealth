<!DOCTYPE html>
<html xmlns:th ="https://www.thymeleaf.org"
	  xmlns:layout="http://www.ultrq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>体重記録画面</title>
</head>
<body>
<div layout:fragment="contents">
	<div class="weight-records-index-wrapper">
	<!-- グラフのセクション -->
	<section class="full-weightGraph">
      <div class="flex-center">
        <div class="inner target-weight-container">
	      <h2>目標体重</h2>
			<div>
				<p th:text="${targetWeight}"></p>
				<!-- <p th:text="${map}"></p> -->
			</div>
	    </div>
	  </div>
	      <div class="chart-container" style="position: relative; height:20vh; width:50vw">
		      <script th:inline="javascript">
				const map = new Map(Object.entries(/*[[${map}]]*/));
		    	// console.log(map);
		    	// 全日付の取得後、配列化
		    	var ceatedDate = [];
		    	var createdDate = map.keys();
		    	console.log(createdDate);
		    	// 全体重データの取得後、配列化
		    	var weightData = [];
		    	var weightData = map.values();
	    	  </script>
			  
	      	  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	      	  <canvas id="myChart" width="400" height="300"></canvas>
	
			  <script>
			      const data = {
			      // labels: createdDate.toArray(),
			      labels: Array.from(createdDate),
			      datasets: [{
			      label: 'My Weightdata',
			      backgroundColor: 'rgb(255, 99, 132)',
			      borderColor: 'rgb(255, 99, 132)',
			      //data: weightData.toArray(),
			      data: Array.from(weightData),
			      }]
			  	  }; 
				
				  const config = {
					  type: 'line',
					  data: data,
					  options: {}
				  };
				  const ctx = document.getElementById('myChart');
				  const myChart = new Chart(ctx, config);
			   </script>
		   </div><!-- class="chart-container" style="position: relative; height:20vh; width:50vw"の閉じタグ -->
	
	</section>
	</div> <!-- class="weight-records-index-wrapper"の閉じタグ-->
	
	<!-- 習慣化チェックシートセクション -->
	<div class="balance-sheet-index-wrapper">
	<div class="d-flex flex-row">
	<section class="balance-sheet">
        <div class="d-flex float-start flex-column">
        <div class="p-2">
	  	<h2>健康習慣(週間)バランスシート</h2>
	  	</div>
	  	<div class="p-2">
	    <p>
	      【食事】<br>
	      <label><input type="checkbox" id="food1">良質な食事はできましたか？（糖質が多い炭水化物は極力減らし、良質なアブラを摂ることを心がけることができましたか？）<br></label>
    	  <label><input type="checkbox" id="food2">タンパク質、食物繊維の豊富な食事を積極的に摂ることができましたか？<br></label>
    	  <label><input type="checkbox" id="food3">ファーストフード・コンビニ食・揚げ物は控えられましたか？<br></label>
    	  <label><input type="checkbox" id="food4">水分は1日2L以上摂取することができましたか？<br></label>
    	  <label><input type="checkbox" id="food5">自然素材の食物を購入し、食事摂取することができましたか？<br></label>
    	  【運動】<br>
    	  <label><input type="checkbox" id="exercise1">1週間のうち、3〜5回以上(1回30分以上)適度な負荷をかけた運動をすることができましたか？<br></label>
    	  <label><input type="checkbox" id="exercise2">有酸素運動(ウォーキング・ジョギング・水泳など)と無酸素運動(筋トレ・短距離走など)を適度に取り入れることができましたか？<br></label>
    	  <label><input type="checkbox" id="exercise3">座りっぱなしの状態(1時間以上)を控えることができましたか？<br></label>
    	  <label><input type="checkbox" id="exercise4">正しい呼吸方法はできていますか？<br></label>
    	  <label><input type="checkbox" id="exercise5">SIT・HIITなどのインターバルトレーニングを取り入れることができましたか？<br></label>
    	  【睡眠】<br>
    	  <label><input type="checkbox" id="sleep1">起きてから3〜4時間後に眠気はありませんでしたか？さわやかに脳が働いていましたか？<br></label>
    	  <label><input type="checkbox" id="sleep2">寝付きが30分以上かかっていませんでしたか？<br></label>
    	  <label><input type="checkbox" id="sleep3">寝る時間と起きる時間は一定でしたか？<br></label>
    	  <label><input type="checkbox" id="sleep4">7〜8時間以上睡眠時間をしっかり確保できましたか？<br></label>
    	  <label><input type="checkbox" id="sleep5">寝る2時間前からスマホやパソコン、テレビを見るのを控えることができましたか？<br></label>
    	  
    	  <div>
			<input type="button" value="Check" id="checkButton">
		  </div>
		  
		  <script>
		  		let totalFoodScore = 0;
		  		let totalExerciseScore = 0;
		  		let totalSleepScore = 0;
		  		
				function butotnClick(){
				  if (checkbox1.checked) totalFoodScore += 20;
				  if (checkbox2.checked) totalFoodScore += 20;
				  if (checkbox3.checked) totalFoodScore += 20;
				  if (checkbox4.checked) totalFoodScore += 20;
				  if (checkbox5.checked) totalFoodScore += 20;
				  if (checkbox6.checked) totalExerciseScore += 20;
				  if (checkbox7.checked) totalExerciseScore += 20;
				  if (checkbox8.checked) totalExerciseScore += 20;
				  if (checkbox9.checked) totalExerciseScore += 20;
				  if (checkbox10.checked) totalExerciseScore += 20;
				  if (checkbox11.checked) totalSleepScore += 20;
				  if (checkbox12.checked) totalSleepScore += 20;
				  if (checkbox13.checked) totalSleepScore += 20;
				  if (checkbox14.checked) totalSleepScore += 20;
				  if (checkbox15.checked) totalSleepScore += 20;
				}
				
				// for (let i = 1; i <= 5; i++) {
					// let checkbox[i] = document.getElementById('food[i]');
				// }
				let checkbox1 = document.getElementById('food1');
				let checkbox2 = document.getElementById('food2');
				let checkbox3 = document.getElementById('food3');
				let checkbox4 = document.getElementById('food4');
				let checkbox5 = document.getElementById('food5');
				let checkbox6 = document.getElementById('exercise1');
				let checkbox7 = document.getElementById('exercise2');
				let checkbox8 = document.getElementById('exercise3');
				let checkbox9 = document.getElementById('exercise4');
				let checkbox10 = document.getElementById('exercise5');
				let checkbox11 = document.getElementById('sleep1');
				let checkbox12 = document.getElementById('sleep2');
				let checkbox13 = document.getElementById('sleep3');
				let checkbox14 = document.getElementById('sleep4');
				let checkbox15 = document.getElementById('sleep5');
				
				let checkButton = document.getElementById('checkButton');
				checkButton.addEventListener('click', butotnClick);
		  </script>
	    </p>
	    </div>
	</section>
	
	<section class="balance-sheet-polar-area">
		<div class="flex-center">
	    <div class="polarArea-chart-container" style="position: relative; height:20vh; width:40vw">
		      
		      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		      <canvas id="myChartPolarArea" width="300" height="200"></canvas>
	      	  
	      	  <script>
	      		
		      	const polardata = {
		      		  labels: [
		      		    '食事',
		      		  	'運動',
		      		    '睡眠'
		      		  ],
		      		  datasets: [{
		      		    label: 'My First Dataset',
		      		    data: [totalFoodScore, totalExerciseScore, totalSleepScore],
		      		    backgroundColor: [
		      		      'rgb(255, 99, 132, 0.3)',
		      		      'rgb(255, 205, 86, 0.3)',
		      		      'rgb(75, 192, 192, 0.3)'
		      		    ]	
		      		  }]
		      		};
		      	const polarconfig = {
		      		  type: 'polarArea',
		      		  data: polardata,
		      		  options: {
		      			responsive: true,
		      		    plugins: {
		      		      legend: {
		      		        position: 'top',
		      		      },
		      		      title: {
		      		        display: true,
		      		        text: '食事/運動/睡眠バランス'
		      		      }
		      		    }
		      		  },
		      		};
		      	const polarctx = document.getElementById('myChartPolarArea');
				const myChartPolarArea = new Chart(polarctx, polarconfig);
	      	  </script>
		</div><!-- class="chart-container" style="position: relative; height:20vh; width:50vw"の閉じタグ -->
		</div>
	</section>
	</div>
	</div><!-- class="balance-sheet-index-wrapper"の閉じタグ -->
	
</div> <!-- layout:fragment="contents"の閉じタグ-->
</body>
</html>